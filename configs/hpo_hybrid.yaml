study:
    name: "uq_hybrid_gauss_v1"
    storage: "sqlite:///optuna_studies/hpo.db"
    direction: "minimize"
    resume: true

budget:
    n_trials: 16

resources:
    partition: "gpu"
    time: "00:40:00"
    mem_gb: 8
    cpus_per_task: 4
    gpus: 1
    max_parallel: 2

io:
    outputs_root: "outputs/optuna"
    logs_root: "logs"
    job_name_template: "{study}_{ts}_{jobid}"
    trial_dir_template: "trial_{trial:05d}"

base_config:
    train_config_path: "uncertainty_quantification/configs/train_hybrid.yaml"
    train_script_path: "uncertainty_quantification/scripts/train_regression.py"

repro:
    snapshot_hpo_config: true
    snapshot_base_config: true

search_space:
    - { name: "training.lr",       dist: "loguniform", low: 1.0e-5, high: 2.0e-3 }
    - { name: "model.hidden_dims", dist: "choice", choices: [[512,256,128],[768,384,192],[512,512,256]] }
    - { name: "model.dropout",     dist: "uniform", low: 0.00, high: 0.30, step: 0.05 }
    - { name: "data.batch_size",   dist: "choice", choices: [1024, 2048, 4096] }

post_run:
    export_best: true
    best_dirname: "best"
    best_filename: "best_hparams.json"
    latest_pointer_dir: "outputs/optuna/{study}/best"
